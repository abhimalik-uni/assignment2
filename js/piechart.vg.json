{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "data/melb_data.csv"
  },
  "transform": [
    {
      "aggregate": [
        {"op": "sum", "field": "Propertycount", "as": "TotalProperties"}
      ],
      "groupby": ["Suburb", "TypeCategory"]
    },
    {
      "filter": {
        "selection": "suburbSelect"
      }
    }
  ],
  "selection": {
    "suburbSelect": {
      "type": "single",
      "fields": ["Suburb"],
      "bind": {
        "input": "select",
        "options": [
          null,
          "Abbotsford",
          "Airport West",
          "Albert Park",
          "Alphington",
          "Altona",
          "Altona North",
          "Armadale",
          "Ascot Vale",
          "Ashburton",
          "Ashwood",
          "Avondale Heights",
          "Balaclava",
          "Balwyn",
          "Balwyn North",
          "Bentleigh",
          "Bentleigh East",
          "Box Hill",
          "Braybrook",
          "Brighton",
          "Brighton East",
          "Brunswick",
          "Brunswick West",
          "Bulleen",
          "Burwood",
          "Camberwell",
          "Canterbury",
          "Carlton North",
          "Carnegie",
          "Caulfield",
          "Caulfield North",
          "Caulfield South",
          "Chadstone",
          "Clifton Hill",
          "Coburg",
          "Coburg North",
          "Collingwood",
          "Doncaster",
          "Eaglemont",
          "Elsternwick",
          "Elwood",
          "Essendon",
          "Essendon North",
          "Fairfield",
          "Fitzroy",
          "Fitzroy North",
          "Flemington",
          "Footscray",
          "Glen Iris",
          "Glenroy",
          "Gowanbrae",
          "Hadfield",
          "Hampton",
          "Hampton East",
          "Hawthorn",
          "Heidelberg Heights",
          "Heidelberg West",
          "Hughesdale",
          "Ivanhoe",
          "Kealba",
          "Keilor East",
          "Kensington",
          "Kew",
          "Kew East",
          "Kooyong",
          "Maidstone",
          "Malvern",
          "Malvern East",
          "Maribyrnong",
          "Melbourne",
          "Middle Park",
          "Mont Albert",
          "Moonee Ponds",
          "Moorabbin",
          "Newport",
          "Niddrie",
          "North Melbourne",
          "Northcote",
          "Oak Park",
          "Oakleigh South",
          "Parkville",
          "Pascoe Vale",
          "Port Melbourne",
          "Prahran",
          "Preston",
          "Reservoir",
          "Richmond",
          "Rosanna",
          "Seddon",
          "South Melbourne",
          "South Yarra",
          "Southbank",
          "Spotswood",
          "St Kilda",
          "Strathmore",
          "Sunshine",
          "Sunshine North",
          "Sunshine West",
          "Surrey Hills",
          "Templestowe Lower",
          "Thornbury",
          "Toorak",
          "Viewbank",
          "Watsonia",
          "West Melbourne",
          "Williamstown",
          "Williamstown North",
          "Windsor",
          "Yallambie",
          "Yarraville",
          "Aberfeldie",
          "Bellfield",
          "Brunswick East",
          "Burnley",
          "Campbellfield",
          "Carlton",
          "East Melbourne",
          "Essendon West",
          "Fawkner",
          "Hawthorn East",
          "Heidelberg",
          "Ivanhoe East",
          "Jacana",
          "Kingsbury",
          "Kingsville",
          "Murrumbeena",
          "Ormond",
          "West Footscray",
          "Albion",
          "Brooklyn",
          "Glen Huntly",
          "Oakleigh",
          "Ripponlea",
          "Cremorne",
          "Docklands",
          "South Kingsville",
          "Strathmore Heights",
          "Travancore",
          "Caulfield East",
          "Seaholme",
          "Keilor Park",
          "Gardenvale",
          "Princes Hill",
          "Bayswater",
          "Bayswater North",
          "Beaumaris",
          "Berwick",
          "Boronia",
          "Briar Hill",
          "Broadmeadows",
          "Bundoora",
          "Burnside Heights",
          "Burwood East",
          "Cairnlea",
          "Caroline Springs",
          "Cheltenham",
          "Craigieburn",
          "Cranbourne",
          "Croydon",
          "Dandenong",
          "Dandenong North",
          "Diamond Creek",
          "Dingley Village",
          "Doncaster East",
          "Donvale",
          "Doreen",
          "Eltham",
          "Epping",
          "Forest Hill",
          "Frankston",
          "Frankston North",
          "Frankston South",
          "Gisborne",
          "Gladstone Park",
          "Greensborough",
          "Hallam",
          "Healesville",
          "Highett",
          "Hillside",
          "Huntingdale",
          "Keilor Downs",
          "Keilor Lodge",
          "Keysborough",
          "Kings Park",
          "Lalor",
          "Lower Plenty",
          "Melton",
          "Mernda",
          "Mill Park",
          "Mitcham",
          "Montmorency",
          "Mordialloc",
          "Mount Waverley",
          "Narre Warren",
          "Nunawading",
          "Oakleigh East",
          "Parkdale",
          "Point Cook",
          "Ringwood East",
          "Rockbank",
          "Rowville",
          "Sandringham",
          "Seaford",
          "Skye",
          "South Morang",
          "Springvale",
          "St Albans",
          "Sunbury",
          "Tarneit",
          "Taylors Hill",
          "Taylors Lakes",
          "The Basin",
          "Thomastown",
          "Truganina",
          "Tullamarine",
          "Vermont",
          "Wantirna",
          "Wantirna South",
          "Werribee",
          "Westmeadows",
          "Williams Landing",
          "Wollert",
          "Wyndham Vale",
          "Black Rock",
          "Blackburn",
          "Blackburn North",
          "Bonbeach",
          "Carrum",
          "Chelsea",
          "Clayton",
          "Doveton",
          "Ferntree Gully",
          "Glen Waverley",
          "Greenvale",
          "Heathmont",
          "Hoppers Crossing",
          "McKinnon",
          "Melton South",
          "Melton West",
          "Mentone",
          "Mooroolbark",
          "Mulgrave",
          "Ringwood",
          "Roxburgh Park",
          "Seabrook",
          "Templestowe",
          "Vermont South",
          "Warrandyte",
          "Watsonia North",
          "Wheelers Hill",
          "Altona Meadows",
          "Blackburn South",
          "Carrum Downs",
          "Clayton South",
          "Croydon North",
          "Langwarrin",
          "Noble Park",
          "Notting Hill",
          "Ringwood North",
          "Sydenham",
          "Albanvale",
          "Beaconsfield Upper",
          "Chelsea Heights",
          "Dallas",
          "Deer Park",
          "Eltham North",
          "Keilor",
          "Meadow Heights",
          "Mount Evelyn",
          "North Warrandyte",
          "Pakenham",
          "Riddells Creek",
          "Sandhurst",
          "Scoresby",
          "Silvan",
          "Aspendale",
          "Chirnside Park",
          "Croydon Hills",
          "Croydon South",
          "Derrimut",
          "Diggers Rest",
          "Edithvale",
          "Hampton Park",
          "Knoxfield",
          "St Helena",
          "Upwey",
          "Bacchus Marsh",
          "Coolaroo",
          "Cranbourne North",
          "Kilsyth",
          "Montrose",
          "Aspendale Gardens",
          "Bullengarook",
          "Clarinda",
          "Deepdene",
          "Delahey",
          "Hurstbridge",
          "Kurunjang",
          "Wonga Park",
          "Endeavour Hills",
          "Officer",
          "Waterways",
          "Ardeer",
          "Beaconsfield",
          "Springvale South",
          "Yarra Glen",
          "Brookfield",
          "Emerald",
          "Whittlesea",
          "Burnside",
          "Attwood",
          "Wallan",
          "New Gisborne",
          "Plumpton",
          "Monbulk"
        ],
        "name": "Choose a suburb: "
      }
    }
  },
  "transform": [
    {
      "calculate": "datum.Type === 'br' ? 'Bedroom(s)' : (datum.Type === 'h' ? 'House' : (datum.Type === 'u' ? 'Unit' : (datum.Type === 't' ? 'Townhouse' : (datum.Type === 'dev site' ? 'Development Site' : 'Other Residential'))))",
      "as": "TypeCategory"
    },
    {
      "filter": {
        "selection": "suburbSelect"
      }
    },
    {
      "aggregate": [
        {"op": "count", "as": "PropertyCount"}
      ],
      "groupby": ["TypeCategory"]
    }
  ],
  "title": {
    "text": "Suburb Property Types",
    "fontSize": 16
  }
  ,
  "mark": {
    "type": "arc",
    "tooltip": true
  },
  "encoding": {
    "theta": {"field": "PropertyCount", "type": "quantitative"},
    "color": {"field": "TypeCategory", "type": "nominal", "title":"Property Type"},
    "tooltip": [
      {"field": "PropertyCount", "type": "quantitative", "title":"Count"},
      {"field": "TypeCategory", "type": "ordinal", "title":"Property Type"}
    ],
    "text": {"field": "PropertyCount", "type": "quantitative", "title": "Count"}
  }
}
